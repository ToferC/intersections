{% extends "base.html" %}

{% block title %}
{{ node.node_name }} - {{ node.domain_token }}
{% endblock title %}

{% block content %}
<main>
    <div class="column" style="width:50px"></div>

    <div class="column" style="width: 48%">
        <h1>{{ node.node_name }} - {{ node.domain_token }}</h1>
        <p><a href="/full_network_graph">Return to Full Graph</a> | <a href="/node_network_graph/{{ node.node_name }}">View Person Graph</a> | <a href="/">Return to Index</a></p>
        
        <table>
            <tr>
                <th style="text-align: center;">Lens</th>
                <th style="text-align: center;">Domain</th>
                <th style="text-align: center;">Instances</th>
                <th style="text-align: center;">Mean Inclusivity</th>
            </tr>
            <tr>
                <td style="text-align: center;">{{ node_lens.name | title }}</td>
                <td style="text-align: center;">{{ node_lens.domain | title }}</td>
                <td style="text-align: center;">{{ node_lens.count }}</td>
                <td style="text-align: center;">
                    {{ node_lens.mean_inclusivity | round(method="ceil", precision=3) }}
                    {% if node_lens.mean_inclusivity | float > 0.2 %}
                        <span style="color: green; font-size: 2em;">＋</span>
                    {% elif node_lens.mean_inclusivity | float < -0.2 %}
                        <span style="color: red; font-size: 2em;">－</span>
                    {% else %}
                        <span style="color: blue; font-size: 1.5em;"><></span>
                    {% endif %}
                </td>
            </tr>
        </table>
        <br>
        <table>
            <tr>
                <th style="text-align: center;">Statement</th>
                <th style="text-align: center;">Count</th>
            </tr>
            {% for statement, count in node_lens.frequency_distribution %}
                <tr>
                    <td>{{ statement }}</td>
                    <td style="text-align: center;">{{ count }}</td>
                </tr>
            {% endfor %}
        </table>

    </div>

    <div class="column" style="width: 48%">
        <h1>Global Lenses</h1>
        <p>These are the aggregate lenses from everyone who completed the survey and identified these lenses as part of their identity. They are presented here so that you can compare the person selected with the global ratings.</p>
        <hr>
                {% for lens in other_lenses %}
                    <table>
                        <tr>
                            <th style="text-align: center;">Lens</th>
                            <th style="text-align: center;">Domain</th>
                            <th style="text-align: center;">Instances</th>
                            <th style="text-align: center;">Mean Inclusivity</th>
                        </tr>
                        <tr>
                            <td style="text-align: center;">{{ lens.name | title }}</td>
                            <td style="text-align: center;">{{ lens.domain | title }}</td>
                            <td style="text-align: center;">{{ lens.count }}</td>
                            <td style="text-align: center;">
                                {{ lens.mean_inclusivity | round(method="ceil", precision=3) }}
                                {% if lens.mean_inclusivity | float > 0.2 %}
                                    <span style="color: green; font-size: 2em;">＋</span>
                                {% elif lens.mean_inclusivity | float < -0.2 %}
                                    <span style="color: red; font-size: 2em;">－</span>
                                {% else %}
                                    <span style="color: blue; font-size: 1.5em;"><></span>
                                {% endif %}
                            </td>
                        </tr>
                    </table>
                    <br>
                    <table>
                        <tr>
                            <th style="text-align: center;">Statement</th>
                            <th style="text-align: center;">Count</th>
                        </tr>
                        {% for statement, count in lens.frequency_distribution %}
                            <tr>
                                <td>{{ statement }}</td>
                                <td style="text-align: center;">{{ count }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                    <hr>
                {% endfor %}
                <hr>
    </div>

</div>
    <div class="column" style="width:50px"></div>
</main>
{% endblock content %}