{% extends "base.html" %}

{% block title %}
    <title>Delete Community: {{ community.tag }}</title>
{% endblock title %}

{% block content %}
    <div class="col m-md-2 m-1">
        <br>
        <h1>Delete Community: {{ phrases[community.tag] }}</h1>

        <h2>Details</h2>
        <p>Community details and management.</p>
    
        <p>Description: {{ phrases[community.description] | capitalize}}</p>

        <p>Data Use Policy: {{ phrases[community.data_use_case] | capitalize}}</p>

        <p>Your community code is {{ community.code }}</p>
        
        <p>This community is {% if community.open %}open{% else %}private{% endif %}</p>
        <br>

        <table>
            <tr>
                <th style="text-align: center;">Members</th>
                <th style="text-align: center;">Experiences</th>
                <th style="text-align: center;">Avg. Inclusvity</th>
            </tr>
            <tr>
                <td style="text-align: center;">{{ community.data.members }}</td>
                <td style="text-align: center;">{{ community.data.experiences }}</td>
                <td style="text-align: center;">{{ community.data.mean_inclusivity | round(method="ceil", precision=3) }}</td>
            </tr>
        </table>
        <br>

        <div class="card-body">
            <p><strong>IMPORTANT: Deleting a community will move all data from community members to the aggregate global community. You will not be able to view this community separately again.</strong></p>
            <form name="DeleteCommunityForm" id="deleteCommunityForm" action=/{{ lang }}/delete_community/{{ community.code }} method=POST>
    
                <label>
                    <strong>Enter the community's name to Delete: {{ phrases[community.tag] }}</strong>
                    <input class="form-control form-control-lg" type="text" name="user_verify" placeholder="Community to delete..." required>
                    <small id="code_help" class="form-text text-muted">Enter the community name to delete. This action is permanent.
                    </small>
                </label>
                <hr>
        
                <button 
                    class="btn g-recaptcha btn-danger" 
                    data-sitekey="6LfAltkZAAAAAN7rJGBvRUPm36M1aiL7q2a8SznA" 
                    data-callback='onSubmit' 
                    data-action='submit'
                    type=submit
                    >Delete</button>
    
                <button class="btn btn-dark" href="/{{ lang }}/user/{{ session_user }}">Return to User Profile</button>
                <hr>
            
            </form>
        </div>

    </div>
{% endblock content %}

{% block scripts %}
<script>

    window.onSubmit = onSubmit;

    function onSubmit(token) {
    document.getElementById("deleteCommunityForm").submit();
    };

</script>
{% endblock scripts %}